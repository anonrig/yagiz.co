---
import { Picture } from 'astro:assets'
import MainLayout from '../layouts/main.astro'
import Container from '@/components/ui/container.astro'
import BlogRow from '@/components/blog-row.astro'
import { getCollection } from 'astro:content'
import compareDesc from 'date-fns/compareDesc'
import { site_title, site_description } from '@/consts';
import FamilyPhoto from '@/images/family.png'

const blogs = await getCollection('blog', (blog) => blog.data.status === 'published')
const sortedBlogs = blogs.sort((a, b) => compareDesc(a.data.date, b.data.date))
---
<MainLayout title={site_title} description={site_description}>
    <Container className="-mt-8">
        <div class="mx-auto mb-4 flex max-w-lg flex-col items-center text-center">
            <div class="relative mb-8">
                <Picture
                  alt="Engineering with Yagiz"
                  src={FamilyPhoto}
                  width={150}
                  height={150}
                  class="rounded-full"
                />
            </div>
            <div class="text-lg dark:text-zinc-200">
                Here's a collection of posts about my thoughts, stories, ideas and experiences as a
                human, and an engineer working with different technologies.
            </div>

            <!--<SubscribeButton-->
            <!--  label="Subscribe Now"-->
            <!--  class="mt-6 h-9 items-center justify-center rounded-md border-[1px] border-solid border-slate-200 bg-white px-[15px] text-[11px] font-extrabold uppercase tracking-wider text-orange-400 outline-none hover:border-slate-300 dark:border-neutral-600 dark:bg-white-reversed dark:hover:border-neutral-500"-->
            <!--/>-->
        </div>
    </Container>

    <div class="flex grow pt-8">
        <Container size="tight" className="divide-y divide-slate-200 dark:divide-neutral-700">
          {sortedBlogs.map((blog) => (
            <BlogRow blog={blog} />
          ))}
        </Container>
    </div>
</MainLayout>
